{% extends 'dashboard_crud/base_form.html' %}

{% load static %}
{% load i18n %}

{% block vendor_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}" />
{% endblock %}

{% block form_fields %}
<div class="row mb-3">
  <label class="col-sm-3 col-form-label" for="{{ form.week_start.id_for_label }}">
    {{ form.week_start.label }}
    {% if form.week_start.field.required %}<span class="text-danger">*</span>{% endif %}
  </label>
  <div class="col-sm-9">
    <div class="form-floating form-floating-outline">
      {{ form.week_start }}
      {% if form.week_start.errors %}
        {% for error in form.week_start.errors %}
          <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

<div class="row mb-3">
  <label class="col-sm-3 col-form-label" for="{{ form.total_sales.id_for_label }}">
    {{ form.total_sales.label }}
    {% if form.total_sales.field.required %}<span class="text-danger">*</span>{% endif %}
  </label>
  <div class="col-sm-9">
    <div class="form-floating form-floating-outline">
      <div class="input-group">
        <span class="input-group-text">$</span>
        {{ form.total_sales }}
      </div>
      {% if form.total_sales.errors %}
        {% for error in form.total_sales.errors %}
          <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

<div class="row mb-3">
  <label class="col-sm-3 col-form-label" for="{{ form.total_orders.id_for_label }}">
    {{ form.total_orders.label }}
    {% if form.total_orders.field.required %}<span class="text-danger">*</span>{% endif %}
  </label>
  <div class="col-sm-9">
    <div class="form-floating form-floating-outline">
      {{ form.total_orders }}
      {% if form.total_orders.errors %}
        {% for error in form.total_orders.errors %}
          <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>

<div class="row mb-3">
  <label class="col-sm-3 col-form-label" for="{{ form.growth_rate.id_for_label }}">
    {{ form.growth_rate.label }}
    {% if form.growth_rate.field.required %}<span class="text-danger">*</span>{% endif %}
  </label>
  <div class="col-sm-9">
    <div class="form-floating form-floating-outline">
      <div class="input-group">
        {{ form.growth_rate }}
        <span class="input-group-text">%</span>
      </div>
      {% if form.growth_rate.errors %}
        {% for error in form.growth_rate.errors %}
          <div class="invalid-feedback d-block">{{ error }}</div>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}

{% block vendor_js %}
{{ block.super }}
<script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
{% endblock %}

{% block page_js %}
{{ block.super }}
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Initialize date picker
  flatpickr("#{{ form.week_start.id_for_label }}", {
    dateFormat: "Y-m-d",
    defaultDate: "today"
  });
});
</script>
{% endblock %}
