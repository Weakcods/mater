{% extends 'dashboard_crud/base_list.html' %}

{% load static %}
{% load i18n %}

{% block vendor_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/datatables-bs5/datatables.bootstrap5.css' %}">
{% endblock vendor_css %}

{% block table_headers %}
<th>Date</th>
<th>Type</th>
<th>Amount</th>
<th>Description</th>
{% endblock %}

{% block table_body %}
{% for transaction in transactions %}
<tr>
  <td>{{ transaction.date|date:"M d, Y" }}</td>
  <td>
    <span class="badge bg-label-{% if transaction.type == 'income' %}success{% elif transaction.type == 'expense' %}danger{% else %}info{% endif %}">
      {{ transaction.type|title }}
    </span>
  </td>
  <td>${{ transaction.amount }}</td>
  <td>{{ transaction.description }}</td>
  <td>
    <div class="dropdown">
      <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
        <i class="ri-more-2-fill"></i>
      </button>
      <div class="dropdown-menu">
        <a class="dropdown-item" href="{% url 'dashboards:transaction_update' transaction.id %}">
          <i class="ri-pencil-line me-1"></i> Edit
        </a>
        <a class="dropdown-item text-danger" href="{% url 'dashboards:transaction_delete' transaction.id %}">
          <i class="ri-delete-bin-line me-1"></i> Delete
        </a>
      </div>
    </div>
  </td>
</tr>
{% empty %}
<tr>
  <td colspan="5" class="text-center">No transactions available</td>
</tr>
{% endfor %}
{% endblock %}

{% block page_js %}
{{ block.super }}
<script src="{% static 'vendor/libs/datatables-bs5/datatables.bootstrap5.js' %}"></script>
<script>
  $(document).ready(function() {
    $('table').DataTable({
      "pageLength": 10,
      "ordering": true,
      "order": [[0, 'desc']],
      "info": true,
      "lengthChange": true,
      "searching": true,
    });
  });
</script>
{% endblock %}
